webpackJsonp([69813188090713],{397:function(e,t){e.exports={data:{allMarkdownRemark:{edges:[{node:{id:"/Users/kpman/workspace/kpman.github.com/content/_posts/2014-04-06-ci初體驗for靜態頁面.md absPath of file >>> MarkdownRemark",html:'<p>第一次因為專案需要，而跟 PHP 後端工程師配合，我們選定了<a href="http://www.codeigniter.org.tw/">CI</a>這套 framework 來使用，對於 CI 算是第一次接觸，因此想把從無到有的架設過程給記錄下來。</p>\n<p><img src="https://php.quicoto.com/wp-content/uploads/2013/07/codeigniter-logo.png" alt="codeigniter"></p>\n<!-- more -->\n<h2 id="1、擁有-php-環境"><a href="#1%E3%80%81%E6%93%81%E6%9C%89-php-%E7%92%B0%E5%A2%83" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>1、擁有 php 環境</h2>\n<p>Mac 內建 Apache，只要打開即可。</p>\n<div class="gatsby-highlight" data-language="text">\n      <pre class="language-text"><code class="language-text">sudo apachectl start</code></pre>\n      </div>\n<h2 id="2、安裝-ci"><a href="#2%E3%80%81%E5%AE%89%E8%A3%9D-ci" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>2、安裝 CI</h2>\n<ul>\n<li>到<a href="http://www.codeigniter.org.tw/user_guide/installation/downloads.html">官網</a>下載整份文件檔</li>\n<li>放進 server 的路徑下 <code class="language-text">/Libary/WebServer/Documents/</code></li>\n<li>安裝完畢！</li>\n</ul>\n<h2 id="3、讀取靜態頁面"><a href="#3%E3%80%81%E8%AE%80%E5%8F%96%E9%9D%9C%E6%85%8B%E9%A0%81%E9%9D%A2" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>3、讀取靜態頁面</h2>\n<h3 id="新增頁面"><a href="#%E6%96%B0%E5%A2%9E%E9%A0%81%E9%9D%A2" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>新增頁面</h3>\n<p>此處新增名為 page.php 的檔案 <code class="language-text">application -&gt; view -&gt; cep(optional dir) -&gt; page.php</code></p>\n<ul>\n<li><img src="https://i.imgur.com/gC7kgs2.png" alt="page.php"></li>\n</ul>\n<h3 id="新增-static-files"><a href="#%E6%96%B0%E5%A2%9E-static-files" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>新增 static files</h3>\n<p>如 CSS、JS 檔，習慣性會創建 assets 資料夾將他們放進去，並且放在跟 application 同階層的 dir 內，如圖。\n<img src="https://i.imgur.com/BLh0okD.png" alt="assets"></p>\n<h3 id="新增-route"><a href="#%E6%96%B0%E5%A2%9E-route" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>新增 route</h3>\n<p><code class="language-text">application -&gt; config -&gt; routes.php</code> 新增如下：</p>\n<div class="gatsby-highlight" data-language="text">\n      <pre class="language-text"><code class="language-text">$route[&#39;(:any)&#39;] = &#39;cep/$1&#39;;\n$route[&#39;default_controller&#39;] = &quot;cep&quot;;\n$route[&#39;404_override&#39;] = &#39;&#39;;</code></pre>\n      </div>\n<h3 id="新增-controller"><a href="#%E6%96%B0%E5%A2%9E-controller" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>新增 controller</h3>\n<p>在 controllers 資料夾內，新增 php 檔，內定新的 public function，參照 welcome.php 修改即可。</p>\n<p>新增一個 class extends CI_Controller，裡面加上 page()這個 public function。</p>\n<div class="gatsby-highlight" data-language="text">\n      <pre class="language-text"><code class="language-text">class Cep extends CI_Controller {\n\n    public function index()\n    {\n        $this-&gt;load-&gt;view(&#39;cep/index&#39;);\n    }\n\n    public function page()\n    {\n        $this-&gt;load-&gt;view(&#39;cep/page&#39;);\n    }\n\n}</code></pre>\n      </div>\n<h3 id="路徑修改"><a href="#%E8%B7%AF%E5%BE%91%E4%BF%AE%E6%94%B9" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>路徑修改</h3>\n<ul>\n<li>application -> config -> config.php 改一行 <code class="language-text">$config[&#39;base_url&#39;] = &#39;/專案資料夾名字/&#39;;</code></li>\n<li>application -> config -> autoload.php 改一行 <code class="language-text">$autoload[&#39;helper&#39;] = array(&#39;url&#39;);</code> 原本是沒有 url，加上 url。</li>\n<li>page.php 這頁的 CSS 和 JS 檔，修改成</li>\n</ul>\n<div class="gatsby-highlight" data-language="text">\n      <pre class="language-text"><code class="language-text">&lt;link rel=&quot;stylesheet&quot; href=&quot;&lt;?php echo base_url(); ?&gt;assets/css/bootstrap.min.css&quot;&gt;\n&lt;link rel=&quot;stylesheet&quot; href=&quot;&lt;?php echo base_url(); ?&gt;assets/css/main.css&quot;&gt;\n&lt;script src=&quot;&lt;?php echo base_url(); ?&gt;assets/js/vendor/modernizr-2.6.2.min.js&quot;&gt;&lt;/script&gt;</code></pre>\n      </div>\n<p>如此一來便可以在<code class="language-text">http://localhost/專案資料夾/index.php/page</code> 看到靜態頁面了。</p>\n<h2 id="4、移除-ci-url-上的-indexphp"><a href="#4%E3%80%81%E7%A7%BB%E9%99%A4-ci-url-%E4%B8%8A%E7%9A%84-indexphp" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>4、移除 CI URL 上的 index.php</h2>\n<p>因為每次網址上面都需要有 index.php，覺得不好看，因此兩個步驟把它改掉。</p>\n<ol>\n<li>在 root 加上<code class="language-text">.htaccess</code>檔，內容如下</li>\n</ol>\n<div class="gatsby-highlight" data-language="text">\n      <pre class="language-text"><code class="language-text">RewriteEngine on\nRewriteCond $1 !^(index\\.php)\nRewriteCond %{REQUEST_FILENAME} !-f\nRewriteCond %{REQUEST_FILENAME} !-d\nRewriteRule ^(.*)$ index.php/$1 [L,QSA]</code></pre>\n      </div>\n<ol start="2">\n<li>修改 apache 設定，將 httpd.conf 改掉。\n原本 AllowOverride none 改成 All 即可。</li>\n</ol>\n<div class="gatsby-highlight" data-language="text">\n      <pre class="language-text"><code class="language-text">&lt;Directory /Library/WebServer/Documents&gt;\n    Options FollowSymLinks\n    AllowOverride All\n&lt;/Directory&gt;</code></pre>\n      </div>\n<ol start="3">\n<li>重新啟動 apache <code class="language-text">sudo apachectl restart</code></li>\n</ol>\n<p><em>後記</em></p>\n<p>因尚有其他專案，故本專案檔是全部在一個資料夾內，非直接在 web server 的 root 實作。</p>',fields:{slug:"/2014/04/06/ci初體驗for靜態頁面/"},frontmatter:{title:"CI初體驗for靜態頁面",date:"Apr 06, 2014",tags:["php","ci"]}}}]}},pathContext:{tag:"ci"}}}});
//# sourceMappingURL=path---tags-ci-c68e55d0cc009accbe40.js.map